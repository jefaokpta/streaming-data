<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stream Data</title>
</head>
<body>

  <h1>Stream Data</h1>

  <script>
    const xhr = function(url) {
      return new Promise(function(resolve, reject) {
          const xmhr = new XMLHttpRequest();
          //...
        xmhr.open("GET", url, true);
        xmhr.send();
        xmhr.onreadystatechange = function() {
          if (xmhr.readyState !== 4) return;
          if (xmhr.status === 200) {
            resolve(xmhr.responseText);
          } else {
            reject(new Error(xmhr.statusText));
          }
        };
      });
    };

    xhr('/stream')
            .then(function(success){
                console.log(success, 'success');
            })
            .catch(function(error){
                console.log(error);
            });

  </script>
</body>
</html>